<div id="comment_form">
  <%= form_with model: comment, url: post_comments_path(post), data: { turbo_stream: true }, class: "mt-4" do |f| %>
    <% if comment.errors.any? %>
      <div class="mb-4 p-4 bg-red-50 border border-red-200 rounded-lg">
        <h3 class="text-red-800 font-medium mb-2">エラーがあります:</h3>
        <ul class="list-disc list-inside text-red-700 text-sm">
          <% comment.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="mb-3">
      <%= f.text_area :body,
          placeholder: "コメントを入力してください（最大1000文字）",
          rows: 3,
          class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",
          maxlength: 1000 %>
    </div>

<% unless current_user && current_user == @post.user %>
    <div class="flex justify-between">
      <div>
        <%= link_to "戻る", posts_path,
          class: "px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-lg shadow-sm transition" %>
      </div>
      <%= f.submit "コメントする",
          class: "px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition cursor-pointer" %>
    
    </div>
    <% else %>
    <div class="flex justify-end">
    
    <%= f.submit "コメントする",
          class: "px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition cursor-pointer" %>
    </div>
    <% end %>
  <% end %>
</div>
